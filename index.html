<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Gestione Pacchi Postali</title>
<style>
body { font-family: 'Courier New', monospace; background:#fefefe; padding:20px; }
input, select, button { padding:12px; font-size:16px; border-radius:6px; border:2px dashed #ccc; background:#fff; }
button { background:#cc0000; color:#fff; border:none; cursor:pointer; }
#loginPage { display:flex; justify-content:center; align-items:center; height:100vh; }
.login-box { background:#fff; border:2px dashed #cc0000; padding:40px; border-radius:12px; width:350px; text-align:center; }
.logo { width:100%; max-width:320px; margin-bottom:20px; }
.pacco { display:flex; justify-content:space-between; padding:15px; border:2px dashed #999; background:#fff8e1; border-radius:6px; }
.grandezza-box { display:inline-block; padding:5px 10px; background:yellow; color:red; font-weight:bold; border:2px solid red; margin-right:8px; }
</style>
</head>
<body>
<div id="loginPage">
  <div class="login-box">
    <img src="https://ibb.co/shkm8Nx" alt="Logo" style="display:block;margin:0 auto;width:300px;max-width:90%;">
    <h2>Accesso</h2>
    <input type="email" id="loginEmail" placeholder="Email">
    <input type="password" id="loginPassword" placeholder="Password">
    <div class="remember"><label><input type="checkbox" id="rememberMe"> Ricordami</label></div>
    <button onclick="login()">Entra</button>
  </div>
</div>
</div>
<div id="mainPage" style="display:none;">
<h1>Gestione Pacchi Postali</h1>
<div class="form-group">
  <input type="text" id="codiceTracciabilita" placeholder="Codice TracciabilitÃ ">
  <input type="text" id="codiceRiconoscimento" placeholder="Codice Riconoscimento (opz.)">
  <input type="text" id="nome" placeholder="Nome">
  <input type="text" id="cognome" placeholder="Cognome">
  <select id="grandezzaSelect">
    <option value="">Grandezza pacco</option>
    <option value="P">P - Piccolo</option>
    <option value="M">M - Medio</option>
    <option value="G">G - Grande</option>
  </select>
  <select id="corriereSelect"><option value="">Corriere</option></select>
  <select id="scaffaleSelect"><option value="">Scaffale</option></select>
  <button onclick="aggiungiPacco()">Aggiungi</button>
</div>
<input type="text" id="search" placeholder="Cerca" oninput="aggiornaVista()">
<div id="tabs"></div>
<div id="counter"></div>
<div id="contenitori"></div>
<div id="ritiratiContainer"></div>
</div>
<script>
let pacchi = JSON.parse(localStorage.getItem('pacchi')) || [];
let corrieri = JSON.parse(localStorage.getItem('corrieri')) || [];
function salva(){ localStorage.setItem('pacchi',JSON.stringify(pacchi)); localStorage.setItem('corrieri',JSON.stringify(corrieri)); }
function login(){
  const email = document.getElementById('loginEmail').value.trim();
  const pass = document.getElementById('loginPassword').value.trim();

  const validEmail = 'centroposte1@gmail.com';
  const validPass = '2025754785478';

  if(email === validEmail && pass === validPass){
      if(document.getElementById('rememberMe').checked){
          localStorage.setItem('loggedIn','true');
      }
      document.getElementById('loginPage').style.display='none';
      document.getElementById('mainPage').style.display='block';
      aggiornaUltimaAttivita();
  } else {
      alert('Email o password errati');
  }
}
document.getElementById('loginPage').style.display='none';
    document.getElementById('mainPage').style.display='block';
    aggiornaUltimaAttivita();
  } else { alert('Credenziali errate'); }
}
else alert('Credenziali errate'); }
function aggiornaCorriereSelect(){ corriereSelect.innerHTML='<option value="">Corriere</option>'; corrieri.forEach(c=>{ let o=document.createElement('option'); o.value=c; o.textContent=c; corriereSelect.appendChild(o); }); }
function aggiungiPacco(){
  const grandezza=grandezzaSelect.value;
  pacchi.push({ id:Date.now(), codiceTracciabilita:codiceTracciabilita.value, riconoscimento:codiceRiconoscimento.value||'-', nome:nome.value, cognome:cognome.value, corriere:corriereSelect.value, scaffale:scaffaleSelect.value, grandezza, ritirato:false });
  salva(); aggiornaVista();
}
function toggleRitirato(id){ let p=pacchi.find(x=>x.id===id); p.ritirato=!p.ritirato; salva(); aggiornaVista(); }
function aggiornaVista(){
  aggiornaCorriereSelect();
  const s=search.value.toLowerCase(), cont=contenitori; cont.innerHTML='';
  pacchi.filter(p=>!p.ritirato).forEach(p=>{
    let d=document.createElement('div'); d.className='pacco';
    d.innerHTML=`<div><span class='grandezza-box'>${p.grandezza||''}</span> #${p.riconoscimento} - ${p.codiceTracciabilita} - ${p.nome} ${p.cognome}</div><label><input type='checkbox' onclick='toggleRitirato(${p.id})'></label>`;
    cont.appendChild(d);
  });
}
aggiornaVista();
</script>
</body>
</html>
